(this["webpackJsonpsensor-app"]=this["webpackJsonpsensor-app"]||[]).push([[0],{194:function(e,t,a){e.exports=a(232)},199:function(e,t,a){},200:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),c=(a(199),a(9)),l=(a(200),a(56)),s=a.n(l),u={getSensorLocation:"select%20*%20from%20sensor.active_sensor_locations",getLocations:"select%20*%20from%20sensor_test.active_sensor_locations",getTableData:"SELECT stationid,stationname,parameter,loc_owner,alarm,locid FROM sensor.sensordata_drift_v2&format=geojson",getSingleElem:"SELECT * from sensor.sensordata_drift_v2 WHERE locid=354"},m="https://watsonc.admin.gc2.io/api/v2/sql/watsonc/?q=",d="https://watsonc.admin.gc2.io/api/v2/sql/magloire@watsonc?q=",g="&key=2a528b3bc396ca7f544b7b6a4bc52bb7",p=function(e){return s.a.get("".concat(d).concat(u[e]))},f=function(){return p("getTableData")},E=function(e,t){var a="".concat(d,"INSERT INTO sensor_test.waterlevel (stationid,timeofmeas,disttowatertable_m,useforcorrection,comment)\n                      VALUES(").concat(e,",'").concat(t.timeofmeas,"',").concat(t.disttowatertable_m,",").concat(t.useforcorrection,",'").concat(t.comment,"')").concat(g,"\n  ");return s.a.get(a)},b=function(e,t){var a=Object.keys(t),n=t.gid,r=a.filter((function(e){return"gid"!==e||"stationid"!==e})).map((function(e){return"timeofmeas"===e?"".concat(e,"='").concat(t[e].split("+")[0],"'"):"".concat(e,"='").concat(t[e],"'")})).join(","),o="".concat(d,"UPDATE sensor_test.waterlevel SET ").concat(r," WHERE gid = ").concat(n).concat(g);return s.a.get(o)},j=a(42),h=a(299),C=a(318),I=a(300),v=a(242),M=a(158),O=a.n(M),w=a(159),T=a.n(w),y=a(110),x=a(317);function S(e){var t=e.children,a=e.value,n=e.index,o=Object(y.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},o),a===n&&r.a.createElement(x.a,{p:3},t))}a(223);var k=a(57),A=a.n(k),D=Object(n.createContext)(),L={width:"100%",height:"1200px"},N=A.a.icon({iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJMYWdfMSIgZGF0YS1uYW1lPSJMYWcgMSIgdmlld0JveD0iMCAwIDU1MC40NCA1NTEuNzQiIHdpZHRoPSI0MnB4IiBoZWlnaHQ9IjQycHgiPgogICAgICAgIDxkZWZzPgogICAgICAgICAgICA8c3R5bGU+CiAgICAgICAgICAgICAgICAuY2xzLTF7ZmlsbDojMDA1ODdhO30KICAgICAgICAgICAgICAgIC5jbHMtMSwuY2xzLTR7fQogICAgICAgICAgICAgICAgLmNscy0ye2ZpbGw6IzEzODBjNDt9CiAgICAgICAgICAgICAgICAuY2xzLTN7ZmlsbDojMTM4MGM0O30KICAgICAgICAgICAgICAgIC5jbHMtNHtmaWxsOm5vbmU7fQogICAgICAgICAgICA8L3N0eWxlPgogICAgICAgIDwvZGVmcz4KICAgICAgICA8dGl0bGU+Q2lya2VsPC90aXRsZT4KICAgICAgICA8ZyBpZD0iTGFnXzEtMiIgZGF0YS1uYW1lPSJMYWcgMS0yIj4KICAgICAgICAgICAgPHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNTQ1LjYsNDUxLjc2QzUzNi45MywyMTAuNTksMzQyLjYsMTUuMTksMTAxLjYsNWExNS44OCwxNS44OCwwLDAsMC0xNi41MiwxNS4yaDB2NDlhMTYuMjMsMTYuMjMsMCwwLDAsMTUuNTUsMTYuMTJjMTk3LjY4LDkuMjYsMzU2LjU4LDE2OS4xLDM2NC42MywzNjYuODdhMTYuMjUsMTYuMjUsMCwwLDAsMTYuMDYsMTUuNjJsNDguMjMuMzRhMTUuOTMsMTUuOTMsMCwwLDAsMTYuMDYtMTUuNzZoMEM1NDUuNjEsNDUyLjIxLDU0NS42MSw0NTIsNTQ1LjYsNDUxLjc2Wm0tMTU5LjYuNDNjLTktMTUzLjYxLTEzMi40MS0yNzcuNjEtMjg1Ljc5LTI4Ny41YTE1LjgxLDE1LjgxLDAsMCwwLTE2Ljc5LDE0Ljc3aDB2MS4xM0w4My41NiwyMjlhMTYuMzIsMTYuMzIsMCwwLDAsMTUsMTYuMmMxMTAuNjUsOC4zOCwxOTkuMTksOTcuNzEsMjA2Ljg5LDIwOC4xNWExNi4zLDE2LjMsMCwwLDAsMTYuMTEsMTUuMDhsNDguMzkuNDZBMTUuODIsMTUuODIsMCwwLDAsMzg2LDQ1My40di0xLjIxWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMTcgLTAuMDMpIi8+CiAgICAgICAgICAgIDxjaXJjbGUgY2xhc3M9ImNscy0yIiBjeD0iMTE5LjgzIiBjeT0iNDMxLjc0IiByPSIxMTUiLz4KICAgICAgICA8L2c+CiAgICAgICAgPHBhdGggY2xhc3M9ImNscy0zIiBkPSJNMTIwLjE3LDU0Ni43N2MtNjMuNjYsMC0xMTUuMjYtNTEuNDktMTE1LjI2LTExNXM1MS42LTExNSwxMTUuMjYtMTE1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMC4xNyAtMC4wMykiLz4KICAgICAgICA8Y2lyY2xlIGNsYXNzPSJjbHMtNCIgY3g9IjEyMCIgY3k9IjQzMS43NCIgcj0iMTE1Ii8+CiAgICA8L3N2Zz4="});var Y=function(e){var t=Object(n.useContext)(D),a=r.a.useRef(null);r.a.useRef([]),Object(n.useEffect)((function(){return a.current=function(){var e="d12107f70a3ee93153f313c7c502169a",t=A.a.tileLayer.wms("https://services.kortforsyningen.dk/topo_skaermkort",{layers:"dtk_skaermkort_daempet",token:e,format:"image/png",attribution:'&copy; <a target="_blank" href="https://download.kortforsyningen.dk/content/vilk%C3%A5r-og-betingelser">Styrelsen for Dataforsyning og Effektivisering</a>'}),a=A.a.tileLayer.wms("https://services.kortforsyningen.dk/service?request=GetCapabilities&servicename=dagi&service=WMS&version=1.1.1",{layers:"kommune",format:"image/png",token:e,transparent:!0});return A.a.map("map",{center:[55.876823,8.961644],zoom:8,layers:[t,a]})}(),function(){a.current&&a.current.remove()}}),[]);var o=r.a.useRef(null);return Object(n.useEffect)((function(){o.current=A.a.featureGroup().addTo(a.current)}),[]),Object(n.useEffect)((function(){o.current.clearLayers();var a=e.data.features;a&&a.forEach((function(e){var a=[e.properties.lat,e.properties.long],n=A.a.marker(a,{icon:N}).bindPopup(e.properties.mouseover);n.on("click",function(e){return function(){var a=document.getElementsByClassName("leaflet-popup-content-wrapper");a&&a.length>0&&A.a.DomEvent.on(a[0],"click",(function(){t.setLocationId(e.properties.locid+"_"),t.setTabValue(1)}))}}(e)),n.addTo(o.current)}))}),[e.data.features]),r.a.createElement("div",{id:"map",style:L})},z=(a(149),a(235)),_=a(113),B=a(4);Object(j.a)({root:{"& .sensor-app.negative":{backgroundColor:"#d47483",color:"#1a3e72",fontWeight:"600"},"& .sensor-app.positive":{backgroundColor:"rgba(157, 255, 118, 0.49)",color:"#1a3e72",fontWeight:"600"}}});var F=a(55),U=a(293),R=a(236),W=a(155),P=a.n(W),H=a(92),G=a(156),Z=a.n(G),J=a(157),V=a.n(J),K=a(10),Q=a(70),q=function(e){return r.a.createElement(K.b,Object.assign({formatterComponent:X},e))},X=function(e){var t=e.value;return r.a.createElement($,{locationId:t})},$=function(e){var t=e.locationId,a=Object(n.useContext)(D);return r.a.createElement(H.a,{"aria-label":"Edit",onClick:function(e){a.setLocationId(t),a.setTabValue(0)}},r.a.createElement(P.a,null))},ee=function(e){var t=e.row;return r.a.createElement(U.a,null,r.a.createElement(R.a,null,r.a.createElement("b",null,"Location ID: "),t.locid),r.a.createElement(R.a,null,r.a.createElement("b",null,"Station ID: "),t.stationid))},te=function(e){var t=e.value,a=(e.style,Object(y.a)(e,["value","style"]));return r.a.createElement(Q.d.Cell,a,function(e){switch(e){case"!":return r.a.createElement(Z.a,{color:"secondary"});case"OK":return r.a.createElement(V.a,{style:{color:"mediumseagreen"}});default:return""}}(t))},ae=function(e){return"alarm"===e.column.name?r.a.createElement(te,e):r.a.createElement(Q.d.Cell,e)},ne=function(e){return"Redigere"===e.children?"":r.a.createElement(Q.b.Title,e)},re=[{name:"station_loc_id",title:"Redigere",width:50},{name:"stationname",title:"Stationsnavn",width:200},{name:"parameter",title:"Parameter",width:200},{name:"loc_owner",title:"Ejer",width:200},{name:"alarm",title:"Alarm",width:200}],oe=function(e){e.setLocation;var t=e.goToTable,a=Object(n.useState)([]),o=Object(c.a)(a,2),i=o[0],l=o[1],s=Object(n.useState)(!1),u=Object(c.a)(s,2),m=u[0],d=u[1];Object(n.useEffect)((function(){d(!0),f().then((function(e){d(!1),l(e.data.features)}))}),[]);var g=i.map((function(e,t){return Object(F.a)(Object(F.a)({},e.properties),{},{station_loc_id:e.properties.locid+"_"+e.properties.stationid,id:t})}));return r.a.createElement(_.a,null,m&&r.a.createElement(z.a,null),r.a.createElement(Q.a,{rows:g,columns:re,style:{height:1200}},r.a.createElement(q,{for:["station_loc_id"],goToTable:t}),r.a.createElement(K.i,{defaultExpandedRowIds:[]}),r.a.createElement(Q.d,{height:1200,cellComponent:ae}),r.a.createElement(Q.b,{titleComponent:ne}),r.a.createElement(Q.c,{contentComponent:ee})))},ie=Object(j.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function ce(e){ie();var t=Object(n.useState)(0),a=Object(c.a)(t,2),o=(a[0],a[1],Object(n.useContext)(D)),i=r.a.createElement(v.a,{title:"Kort"},r.a.createElement(O.a,null)),l=r.a.createElement(v.a,{title:"Tabel"},r.a.createElement(T.a,null));return r.a.createElement("div",null,r.a.createElement(h.a,{position:"static",style:{backgroundColor:"lightseagreen"}},r.a.createElement(C.a,{value:o.tabValue,onChange:function(e,t){o.setTabValue(t)},variant:"fullWidth","aria-label":"simple tabs example"},r.a.createElement(I.a,{icon:l}),r.a.createElement(I.a,{icon:i}))),r.a.createElement(S,{value:o.tabValue,index:0},r.a.createElement(oe,e)),r.a.createElement(S,{value:o.tabValue,index:1},r.a.createElement(Y,{data:e.sensors})))}var le=a(23),se=a(7),ue=a(24),me=a(321),de=a(315),ge=a(237),pe=a(43),fe=a(316),Ee=a(161),be=a.n(Ee),je=a(107),he=a.n(je),Ce=a(86),Ie=a.n(Ce),ve=a(294),Me=a(162),Oe=a.n(Me),we=a(296),Te=a(298),ye=a(288),xe=a(304),Se=a(297),ke=a(295),Ae=a(238),De=a(301),Le=a(303),Ne=a(302);function Ye(e){var t=e.measurementId,a=e.dialogOpen,n=e.onOkDelete,o=e.setDialogOpen,i=r.a.useState(!1),l=Object(c.a)(i,2),s=(l[0],l[1]),u=function(){s(!1),o(!1)};return r.a.createElement("div",null,r.a.createElement(De.a,{open:a,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ne.a,{id:"alert-dialog-title"},"Vil du slette den r\xe6kke?"),r.a.createElement(Le.a,null,r.a.createElement(Ae.a,{onClick:u,color:"primary"},"Nej"),r.a.createElement(Ae.a,{onClick:function(){n(t),o(!1)},color:"primary",autoFocus:!0},"Ja"))))}var ze=Object(j.a)({table:{minWidth:650}});function _e(e){var t=e.measurements,a=e.handleEdit,o=e.handleDelete,i=ze(),l=Object(n.useState)(!1),s=Object(c.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(-1),g=Object(c.a)(d,2),p=g[0],f=g[1];Object(n.useContext)(D);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,{measurementId:p,dialogOpen:u,setDialogOpen:m,onOkDelete:function(e){o(e)}}),r.a.createElement(pe.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Tidligere pejlinger"),r.a.createElement(xe.a,null,r.a.createElement(we.a,{className:i.table,"aria-label":"simple table"},r.a.createElement(Se.a,null,r.a.createElement(ke.a,null,r.a.createElement(ye.a,null,"Dato"),r.a.createElement(ye.a,{align:"right"},"Pejling"),r.a.createElement(ye.a,{align:"right"},"Anvendelse"),r.a.createElement(ye.a,{align:"right"},"Kommentar"))),r.a.createElement(Te.a,null,t.map((function(e,t){return r.a.createElement(ke.a,{key:t},r.a.createElement(ye.a,{component:"th",scope:"row"},e.properties.timeofmeas),r.a.createElement(ye.a,{align:"right"},e.properties.disttowatertable_m),r.a.createElement(ye.a,{align:"right"},e.properties.useforcorrection),r.a.createElement(ye.a,{align:"right"},e.properties.comment),r.a.createElement(ye.a,{align:"right"},r.a.createElement(Ae.a,{onClick:function(){return a(e.properties)}},"Edit")),r.a.createElement(ye.a,{align:"right"},r.a.createElement(Ae.a,{onClick:function(){var t;t=e.properties.gid,f(t),m(!0)}},"Delete")))}))))))}var Be=a(160),Fe=a.n(Be),Ue={autosize:!0,xaxis:{rangeselector:{buttons:[{step:"day",stepmode:"backward",count:1,label:"1 dag"},{step:"day",stepmode:"backward",count:7,label:"1 uge"},{step:"month",stepmode:"backward",count:1,label:"1 m\xe5ned"},{step:"year",stepmode:"backward",count:1,label:"1 \xe5r"}]},autorange:!0,type:"date",domain:[0,.97]},yaxis:{title:{text:"Vandstand, kote [m]",font:{size:14}}},yaxis2:{showgrid:!1,overlaying:"y1",side:"right",fixedrange:!0,range:[0,15],position:.97,title:{text:"Nedb\xf8r [mm]",font:{size:14}}},showlegend:!0,legend:{x:0,y:-.15,orientation:"h"},margin:{l:70,r:20,b:50,t:10,pad:4},font:{size:14,color:"rgb(0, 0, 0)"}};function Re(e){var t=e.graphData,a=e.controlData,o=Object(n.useState)("stationnavn"),i=Object(c.a)(o,2),l=(i[0],i[1]),s=t[0]?t[0].properties.stationname:"",u=t.map((function(e){return e.properties.timeofmeas})),m=t.map((function(e){return e.properties.measurement})),d=a.map((function(e){return e.properties.timeofmeas})),g=a.map((function(e){return e.properties.waterlevel}));return Object(n.useEffect)((function(){t[0]&&l(t[0].properties.stationname)}),[t]),r.a.createElement(Fe.a,{data:[Object(le.a)({x:u,y:m,name:s,type:"scattergl",line:{width:1},mode:"lines+markers",marker:{symbol:"100",size:"4"}},"marker",{color:"rgb(44,160,44)"}),{x:d,y:g,name:"Kontrolpejlinger",type:"scatter",mode:"markers",marker:{symbol:"200",size:"12",color:"hex#FF0000",line:{color:"rgb(0,0,255)",width:1}}}],layout:Ue,config:{responsive:!0},useResizeHandler:!0,style:{width:"100%",height:"100%"}})}function We(e){var t=e.stationId,a=Object(n.useState)([]),o=Object(c.a)(a,2),i=o[0],l=o[1],u=Object(n.useState)([]),d=Object(c.a)(u,2),g=d[0],p=d[1];return Object(n.useEffect)((function(){(function(e){var t="".concat(m,"SELECT * FROM sensor.sensordata_view WHERE station=").concat(e," ORDER BY timeofmeas DESC");return s.a.get(t)})(t).then((function(e){e.data.success&&l(e.data.features)}))}),[t]),Object(n.useEffect)((function(){(function(e){var t="".concat(m,"SELECT * FROM sensor.station_pejlinger WHERE stationid=").concat(e," ORDER BY timeofmeas");return s.a.get(t)})(t).then((function(e){e.data.success&&p(e.data.features)}))}),[t]),r.a.createElement("div",{style:{width:"auto",height:"500px",marginBottom:"20px",border:"2px solid gray"}},r.a.createElement(Re,{graphData:i,controlData:g}))}var Pe=a(305),He=a(306),Ge=a(307),Ze=Object(j.a)((function(e){return{appBar:{top:"auto",bottom:0},appBar1:{top:"auto",bottom:0,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - 240px)",marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},grow:{flexGrow:1},fabButton:{position:"absolute",zIndex:1,top:-30,left:0,right:0,margin:"0 auto"}}})),Je=(Object(se.a)({color:"#ffa137",label:{flexDirection:"column"}})(Ae.a),Object(se.a)((function(e){return{root:{color:e.palette.getContrastText("#ffa137"),backgroundColor:"#ffa137","&:hover":{backgroundColor:"#ffa137"}}}}))(Ae.a));function Ve(e){e.showForm;var t=e.setShowForm,a=e.open,o=Ze(),i=Object(n.useState)(!1),l=Object(c.a)(i,2);l[0],l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"fixed",color:"inherit",className:Object(B.a)(o.appBar1,Object(le.a)({},o.appBarShift,a))},r.a.createElement(ge.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(Je,{onClick:function(e){t(!0)}},r.a.createElement(Pe.a,null),"Indberet pejling"),r.a.createElement(Je,null,r.a.createElement(He.a,null),"Ret stamdata"),r.a.createElement(Je,null,r.a.createElement(Ge.a,null),"Tag billede"))))}var Ke=a(308),Qe=a(309),qe=a(310),Xe=a(171),$e=a(312),et=a(313),tt=a(325),at=a(314),nt=a(320),rt=a(163),ot=a(165),it=a(21),ct=a(311),lt=a(324);function st(e){var t=e.stationId,a=(e.setShowForm,e.formData),n=e.changeFormData,o=e.handleSubmit,i=e.resetFormData,c=function(e){var t=function(e){var t=e.toISOString().split("T")[0],a=e.toTimeString().split(" ")[0];return"".concat(t," ").concat(a)}(e);n("timeofmeas",t)};return r.a.createElement(it.a,{utils:rt.a,locale:ot.a},r.a.createElement(Ke.a,{style:{marginBottom:25}},r.a.createElement(Qe.a,null,r.a.createElement(pe.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Indberet pejling"),r.a.createElement(qe.a,{container:!0,spacing:3},r.a.createElement(qe.a,{item:!0,xs:6},r.a.createElement(ct.a,{disableToolbar:!0,variant:"inline",inputVariant:"outlined",format:"yyyy-MM-dd",margin:"normal",id:"date-picker-inline",label:r.a.createElement(pe.a,{variant:"h6",component:"h3"},"Dato"),value:a.timeofmeas,onChange:c,KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0})),r.a.createElement(qe.a,{item:!0,xs:6},r.a.createElement(lt.a,{inputVariant:"outlined",margin:"normal",id:"overnat_start_tid",label:r.a.createElement(pe.a,{variant:"h6",component:"h3"},"Tidspunkt"),value:a.timeofmeas,onChange:c,KeyboardButtonProps:{"aria-label":"change time"},fullWidth:!0,ampm:!1})),r.a.createElement(qe.a,{item:!0,xs:8},r.a.createElement(Xe.a,{type:"number",variant:"outlined",label:r.a.createElement(pe.a,{variant:"h6",component:"h3"},"pejling"),InputLabelProps:{shrink:!0},fullWidth:!0,value:a.disttowatertable_m,onChange:function(e){n("disttowatertable_m",e.target.value)}})),r.a.createElement(qe.a,{item:!0,xs:4},r.a.createElement(pe.a,null,"Afstand fra pejlpunktskote til vandspejl")),r.a.createElement(qe.a,{item:!0,xs:12},r.a.createElement(Xe.a,{label:r.a.createElement(pe.a,{variant:"h6",component:"h3"},"Kommentar"),value:a.comment,variant:"outlined",multiline:!0,rows:4,InputLabelProps:{shrink:!0},fullWidth:!0,onChange:function(e){n("comment",e.target.value)}})),r.a.createElement(qe.a,{item:!0,xs:12},r.a.createElement($e.a,{component:"fieldset"},r.a.createElement(et.a,{component:"h6"},"Hvordan skal pejlingen anvendes?"),r.a.createElement(tt.a,{value:a.useforcorrection+"",onChange:function(e){n("useforcorrection",e.target.value)}},r.a.createElement(at.a,{value:"0",control:r.a.createElement(nt.a,null),label:"(0) Anvendes ikke"}),r.a.createElement(at.a,{value:"1",control:r.a.createElement(nt.a,null),label:"(1) Anvendes til korrektion fremadrettet"}),r.a.createElement(at.a,{value:"2",control:r.a.createElement(nt.a,null),label:"(2) Anvendes til korrektion bagud og fremadrettet"})))),r.a.createElement(qe.a,{item:!0,xs:4}),r.a.createElement(qe.a,{item:!0,xs:2},r.a.createElement(Ae.a,{autoFocus:!0,style:{backgroundColor:"#ffa137"},onClick:function(){return o(t)}},"Gem")),r.a.createElement(qe.a,{item:!0,xs:2},r.a.createElement(Ae.a,{autoFocus:!0,style:{backgroundColor:"#ffa137"},onClick:i},"Annullere")),r.a.createElement(qe.a,{item:!0,xs:4})))))}function ut(e){var t=e.toISOString().split("T")[0],a=e.toTimeString().split(" ")[0];return"".concat(t," ").concat(a)}function mt(e){var t=e.stationId,a=e.showForm,o=e.setShowForm,i=e.open,l=Object(n.useState)({gid:-1,timeofmeas:ut(new Date),disttowatertable_m:0,useforcorrection:0,comment:""}),u=Object(c.a)(l,2),m=u[0],p=u[1],f=Object(n.useState)(new Date),j=Object(c.a)(f,2),h=j[0],C=j[1],I=Object(n.useState)([]),v=Object(c.a)(I,2),M=v[0],O=v[1];Object(n.useEffect)((function(){(function(e){var t="".concat(d,"SELECT * FROM sensor_test.waterlevel WHERE stationid=").concat(e," ORDER BY timeofmeas DESC");return s.a.get(t)})(t).then((function(e){O(e.data.features)}))}),[h,t]);var w=function(){p({gid:-1,timeofmeas:ut(new Date),disttowatertable_m:0,useforcorrection:0,comment:""}),o(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,null,-1!==t&&r.a.createElement(We,{stationId:t}),r.a.createElement(qe.a,{item:!0,xs:12}),r.a.createElement(qe.a,{item:!0,xs:12}),a&&r.a.createElement(st,{stationId:t,setShowForm:o,formData:m,changeFormData:function(e,t){p(Object(F.a)(Object(F.a)({},m),{},Object(le.a)({},e,t)))},handleSubmit:function(e){o(!1),(-1!==m.gid?b:E)(e,m).then((function(e){w(),C(new Date)}))},resetFormData:w}),r.a.createElement(_e,{measurements:M,updated:h,stationId:t,handleEdit:function(e){p(e),o(!0),C(new Date)},handleDelete:function(e){(function(e){if(e){var t="".concat(d,"DELETE FROM sensor_test.waterlevel WHERE gid=").concat(e).concat(g);return s.a.get(t)}})(e).then((function(e){w(),C(new Date)}))}}),r.a.createElement(ge.a,null),r.a.createElement(Ve,{open:i,stationId:t,showForm:a,setShowForm:o})))}var dt=Object(j.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(F.a)(Object(F.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),title:{flexGrow:1},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),gt=Object(se.a)({root:{"&$selected":{backgroundColor:"lightseagreen",color:"white"}},selected:{}})(R.a);function pt(){var e=dt(),t=Object(ue.a)(),a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1],u=Object(n.useState)(!1),m=Object(c.a)(u,2),g=m[0],p=m[1],f=Object(n.useState)(null),E=Object(c.a)(f,2),b=E[0],j=E[1],C=Object(n.useState)([]),I=Object(c.a)(C,2),v=I[0],M=I[1],O=Object(n.useState)(-1),w=Object(c.a)(O,2),T=w[0],y=w[1],x=Object(n.useContext)(D);return Object(n.useEffect)((function(){var e=x.locationId.split("_"),t=Object(c.a)(e,2),a=t[0],n=t[1];console.log("loc_stat_id : ",n,"---",a),n&&y(parseInt(n)),function(e){var t="".concat(d,"SELECT * from sensor_test.station WHERE locid=").concat(e);return s.a.get(t)}(a).then((function(e){var t,a;n||(n=e.data.features[0].properties.stationid,console.log("selecteditem =>",parseInt(n)),y(parseInt(n))),j((t=n,0===(a=e.data.features).length?null:a.find((function(e){return e.properties.stationid+""===t})))),M(e.data.features),console.log(e.data.features)}))}),[x.locationId]),r.a.createElement("div",{className:e.root},r.a.createElement(de.a,null),r.a.createElement(h.a,{position:"fixed",className:Object(B.a)(e.appBar,Object(le.a)({},e.appBarShift,i)),style:{backgroundColor:"lightseagreen"}},r.a.createElement(ge.a,null,r.a.createElement(H.a,{color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},edge:"start",className:Object(B.a)(e.menuButton,i&&e.hide)},r.a.createElement(be.a,{style:{color:"#ffa137"}})),r.a.createElement(pe.a,{variant:"h6",className:e.title},b&&b.properties.stationname),r.a.createElement(H.a,{className:e.backButton,color:"inherit",onClick:function(e){return x.setLocationId(-1)}},r.a.createElement(Oe.a,null)))),r.a.createElement(me.a,{className:e.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(H.a,{onClick:function(){l(!1)}},"ltr"===t.direction?r.a.createElement(he.a,null):r.a.createElement(Ie.a,null))),r.a.createElement(fe.a,null),r.a.createElement(U.a,null,v.map((function(e,t){var a;return r.a.createElement(gt,(a={key:e.properties.stationid,button:!0},Object(le.a)(a,"key",e.properties.stationid),Object(le.a)(a,"onClick",(function(){y(e.properties.stationid),j(e)})),Object(le.a)(a,"selected",e.properties.stationid===T),a),r.a.createElement(ve.a,{primary:e.properties.stationname}))}))),r.a.createElement(fe.a,null)),r.a.createElement("main",{className:Object(B.a)(e.content,Object(le.a)({},e.contentShift,i))},r.a.createElement("div",{className:e.drawerHeader}),r.a.createElement(mt,{open:i,stationId:-1!==T?T:b?b.properties.stationid:-1,showForm:g,setShowForm:p})))}var ft=function(){var e=Object(n.useState)([]),t=Object(c.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(0),l=Object(c.a)(i,2),s=l[0],u=(l[1],Object(n.useState)(-1)),m=Object(c.a)(u,2),d=m[0],g=m[1],f=Object(n.useState)(-1),E=Object(c.a)(f,2),b=E[0],j=E[1],h=Object(n.useState)(0),C=Object(c.a)(h,2),I=C[0],v=C[1];return Object(n.useEffect)((function(){p("getLocations").then((function(e){o(e.data)}))}),[s]),r.a.createElement(D.Provider,{value:{locationId:d,setLocationId:g,stationId:b,setStationId:j,tabValue:I,setTabValue:v}},r.a.createElement("div",{className:"App"},-1===d?r.a.createElement(ce,{sensors:a}):r.a.createElement(pt,null)))},Et=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,327)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),o(e),i(e)}))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ft,null)),document.getElementById("root")),Et()}},[[194,1,2]]]);
//# sourceMappingURL=main.c558c1e4.chunk.js.map